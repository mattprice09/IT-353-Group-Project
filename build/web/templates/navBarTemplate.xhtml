<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    
    <h:body>
        <div id="navBarTemplate">
            <!-- navbar links -->
            <b:navBar brand="Aiming Higher" inverse="true" brandHref="./faces/index.xhtml" static="true">
            <b:navbarLinks>
                <b:navLink class="#{view.viewId == '/index.xhtml' ? 'active' : ''}" value="Home" outcome="index.xhtml" />
                <b:navLink class="#{view.viewId == '/donationPage.xhtml' ? 'active' : ''}" value="Donate" outcome="donationPage.xhtml" />
                <b:navLink class="#{view.viewId == '/register.xhtml' ? 'active' : ''}" value="Register" outcome="register.xhtml" />
            </b:navbarLinks>
            
            <!-- login form (if user is not logged in) -->
            <b:container id="loginContainer" class="navbarLogin">
                <h:form class="navbar-form navbar-right">
                    <!-- hidden Bean variables to access from JS -->
                    <div class="form-group">
                        <b:row>
                            <b:column span="6">
                                <b:inputText a:placeholder="Username" id="userID" value="#{loginController.currentUser.userName}"
                                         validatorMessage="Invalid username. Please try again.">
                                    <f:validateLength
                                        minimum="2"
                                        maximum="20"/>
                                </b:inputText>
                            </b:column><!--b:column (userName input)-->
                            <b:column span="6">
                                <b:inputSecret a:placeholder="Password" id="password" value="#{loginController.currentUser.password}"
                                               validatorMessage="Invalid password. Please try again.">
                                    <f:validateLength
                                        minimum="2"
                                        maximum="20"/>
                                </b:inputSecret>
                            </b:column><!--b:column (password input)-->
                        </b:row><!--b:row (login input row)-->
                        <b:row>
                            <b:column span="6">
                                <b:message 
                                    class="errorMsg"
                                    showDetail="true"
                                    id="errors1"
                                    for="userID"/>
                            </b:column>
                            <b:column span="6">
                                <b:message 
                                    class="errorMsg"
                                    showDetail="true"
                                    id="errors2"
                                    for="password"/>
                            </b:column>
                        </b:row><!--b:row (error msg row)-->
                    </div><!--form-group -->
                    <b:commandButton id="loginBtn" value="Login" action="#{loginController.authenticate()}"  look="primary"/>
                    <b:button id="registerBtn" value="Register" outcome="#{loginController.registerUser()}" look="primary"/>
                </h:form>
            </b:container>
            
            <!-- this container only shows if user is logged in -->
            <b:container id="welcomeContainer" class="navbarLogin">
                <h:form class="navbar-right">
                    <h:outputLabel class="navbar-text">Welcome, <strong>#{loginController.currentUser.userName}!</strong></h:outputLabel>
                    <h:commandLink class="navbar-text italicText" value="Log Out" action="#{loginController.logOut()}"/>
                </h:form>
            </b:container>
            
        </b:navBar>
      <!-- NAV BAR end-->
        </div>
        
        <!-- Store variables to be accessed from JavaScript client side -->
        <h:inputHidden id="loggedIn" value="#{loginController.loggedIn}"/>
        <h:inputHidden id="numSold" value="#{dashboardController.numSold}"/>
        
        <script type="text/javascript" src="functionality.js"></script>
    </h:body>
    
</html>
